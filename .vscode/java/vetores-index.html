<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Google Charts</title>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-..." crossorigin="anonymous">
</head>
<body class="container mt-4">
  <h1 class="mb-4">Google Charts</h1>

  <form class="form mb-3" onsubmit="executar(); return false;">
    <label class="form-label">Valor de X</label>
    <input class="form-control" type="number" id="v1" required />
    <button class="btn btn-primary mt-2" type="submit">Executar</button>
  </form>

  <div id="chart_div" style="width: 100%; height: 400px;"></div>
  <div class="alert alert-warning mt-3" id="resp"></div>

  <script>
    let valores = [];

    function addValor(x) {
      valores.push(x);
    }

    function media() {
      if (valores.length === 0) return 0;
      const soma = valores.reduce((acc, val) => acc + val, 0);
      return (soma / valores.length).toFixed(2);
    }

    function drawBasic() {
      const data = new google.visualization.DataTable();
      data.addColumn('number', 'Posição');
      data.addColumn('number', 'Valor de X');

      const linhas = valores.map((valor, index) => [index + 1, valor]);
      data.addRows(linhas);

      const options = {
        hAxis: { title: 'Posição' },
        vAxis: { title: 'Valor de X' },
        legend: 'none'
      };

      const chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }

    function executar() {
      const x = parseFloat(document.getElementById("v1").value);
      if (!isNaN(x)) {
        addValor(x);
        google.charts.load('current', { packages: ['corechart'] });
        google.charts.setOnLoadCallback(() => {
          drawBasic();
          document.getElementById("resp").innerHTML = `Média: ${media()}`;
        });
      } else {
        document.getElementById("resp").innerHTML = "Digite um número válido.";
      }
    }
  </script>
</body>
</html>